returns system information in the structure pointed to by buf